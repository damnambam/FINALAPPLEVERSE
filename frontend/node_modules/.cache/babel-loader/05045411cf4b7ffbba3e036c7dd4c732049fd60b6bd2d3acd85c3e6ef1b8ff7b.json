{"ast":null,"code":"// In Navigation.js, update the updateAuthState function\nconst updateAuthState = () => {\n  const currentUser = getCurrentUser();\n  const loggedIn = isAuthenticated();\n  const adminStatus = localStorage.getItem('isAdmin') === 'true';\n  const token = localStorage.getItem('adminToken') || localStorage.getItem('token');\n\n  // Basic validation - check if token exists and looks valid\n  if (loggedIn && (!token || token === 'null' || token === 'undefined')) {\n    // Token is invalid, clear everything\n    console.log('Invalid token detected, clearing auth state');\n    logout();\n    setUser(null);\n    setIsLoggedIn(false);\n    setIsAdminUser(false);\n    return;\n  }\n  setUser(currentUser);\n  setIsLoggedIn(loggedIn);\n  setIsAdminUser(adminStatus);\n};","map":{"version":3,"names":["updateAuthState","currentUser","getCurrentUser","loggedIn","isAuthenticated","adminStatus","localStorage","getItem","token","console","log","logout","setUser","setIsLoggedIn","setIsAdminUser"],"sources":["C:/Users/namil/Desktop/AppleVerse2.0-Final/frontend/src/components/Navigation.js"],"sourcesContent":["// In Navigation.js, update the updateAuthState function\r\nconst updateAuthState = () => {\r\n  const currentUser = getCurrentUser();\r\n  const loggedIn = isAuthenticated();\r\n  const adminStatus = localStorage.getItem('isAdmin') === 'true';\r\n  const token = localStorage.getItem('adminToken') || localStorage.getItem('token');\r\n  \r\n  // Basic validation - check if token exists and looks valid\r\n  if (loggedIn && (!token || token === 'null' || token === 'undefined')) {\r\n    // Token is invalid, clear everything\r\n    console.log('Invalid token detected, clearing auth state');\r\n    logout();\r\n    setUser(null);\r\n    setIsLoggedIn(false);\r\n    setIsAdminUser(false);\r\n    return;\r\n  }\r\n  \r\n  setUser(currentUser);\r\n  setIsLoggedIn(loggedIn);\r\n  setIsAdminUser(adminStatus);\r\n};"],"mappings":"AAAA;AACA,MAAMA,eAAe,GAAGA,CAAA,KAAM;EAC5B,MAAMC,WAAW,GAAGC,cAAc,CAAC,CAAC;EACpC,MAAMC,QAAQ,GAAGC,eAAe,CAAC,CAAC;EAClC,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,KAAK,MAAM;EAC9D,MAAMC,KAAK,GAAGF,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,IAAID,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;EAEjF;EACA,IAAIJ,QAAQ,KAAK,CAACK,KAAK,IAAIA,KAAK,KAAK,MAAM,IAAIA,KAAK,KAAK,WAAW,CAAC,EAAE;IACrE;IACAC,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;IAC1DC,MAAM,CAAC,CAAC;IACRC,OAAO,CAAC,IAAI,CAAC;IACbC,aAAa,CAAC,KAAK,CAAC;IACpBC,cAAc,CAAC,KAAK,CAAC;IACrB;EACF;EAEAF,OAAO,CAACX,WAAW,CAAC;EACpBY,aAAa,CAACV,QAAQ,CAAC;EACvBW,cAAc,CAACT,WAAW,CAAC;AAC7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}