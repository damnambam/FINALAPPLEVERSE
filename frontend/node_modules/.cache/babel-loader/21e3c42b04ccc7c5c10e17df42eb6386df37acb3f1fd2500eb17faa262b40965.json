{"ast":null,"code":"const ADMIN_API_URL = \"http://localhost:5000/api/admin\";\n\n// ========================\n// GET PENDING ADMIN REQUESTS\n// ========================\nexport const getPendingRequests = async () => {\n  try {\n    const token = localStorage.getItem(\"adminToken\") || localStorage.getItem(\"token\");\n    console.log('ðŸ”‘ Using token:', token);\n    const response = await fetch(`${ADMIN_API_URL}/pending-requests`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    console.log('ðŸ“¡ Response status:', response.status);\n    const data = await response.json();\n    console.log('ðŸ“¦ Response data:', data);\n    if (!response.ok) {\n      throw new Error(data.error || data.details || \"Failed to fetch pending requests\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"âŒ Error fetching pending requests:\", error);\n    throw error;\n  }\n};\n\n// ========================\n// GET ALL CURRENT ADMINS\n// ========================\nexport const getCurrentAdmins = async () => {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${ADMIN_API_URL}/admins`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Failed to fetch admins\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Error fetching admins:\", error);\n    throw error;\n  }\n};\n\n// ========================\n// APPROVE ADMIN REQUEST\n// ========================\nexport const approveAdminRequest = async requestId => {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${ADMIN_API_URL}/approve/${requestId}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Failed to approve request\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Error approving request:\", error);\n    throw error;\n  }\n};\n\n// ========================\n// REJECT ADMIN REQUEST\n// ========================\nexport const rejectAdminRequest = async requestId => {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${ADMIN_API_URL}/reject/${requestId}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Failed to reject request\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Error rejecting request:\", error);\n    throw error;\n  }\n};\n\n// ========================\n// TOGGLE ADMIN ACTIVE STATUS\n// ========================\nexport const toggleAdminStatus = async (adminId, isActive) => {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${ADMIN_API_URL}/toggle-status/${adminId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        isActive\n      })\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Failed to update admin status\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Error toggling admin status:\", error);\n    throw error;\n  }\n};\n\n// ========================\n// GET ADMIN ACTIVITY LOG\n// ========================\nexport const getAdminActivityLog = async adminId => {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${ADMIN_API_URL}/activity/${adminId}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Failed to fetch activity log\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Error fetching activity log:\", error);\n    throw error;\n  }\n};\n\n// ========================\n// DELETE ADMIN\n// ========================\nexport const deleteAdmin = async adminId => {\n  try {\n    const token = localStorage.getItem(\"adminToken\");\n    const response = await fetch(`${ADMIN_API_URL}/delete/${adminId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Failed to delete admin\");\n    }\n    return data;\n  } catch (error) {\n    console.error(\"Error deleting admin:\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["ADMIN_API_URL","getPendingRequests","token","localStorage","getItem","console","log","response","fetch","method","headers","status","data","json","ok","Error","error","details","getCurrentAdmins","approveAdminRequest","requestId","rejectAdminRequest","toggleAdminStatus","adminId","isActive","body","JSON","stringify","getAdminActivityLog","deleteAdmin"],"sources":["C:/Users/namil/Desktop/AppleVerse2.0-Final/frontend/src/services/adminService.js"],"sourcesContent":["const ADMIN_API_URL = \"http://localhost:5000/api/admin\";\r\n\r\n// ========================\r\n// GET PENDING ADMIN REQUESTS\r\n// ========================\r\nexport const getPendingRequests = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\") || localStorage.getItem(\"token\");\r\n    \r\n    console.log('ðŸ”‘ Using token:', token);\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/pending-requests`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    console.log('ðŸ“¡ Response status:', response.status);\r\n    const data = await response.json();\r\n    console.log('ðŸ“¦ Response data:', data);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || data.details || \"Failed to fetch pending requests\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"âŒ Error fetching pending requests:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// GET ALL CURRENT ADMINS\r\n// ========================\r\nexport const getCurrentAdmins = async () => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\");\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/admins`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Failed to fetch admins\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching admins:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// APPROVE ADMIN REQUEST\r\n// ========================\r\nexport const approveAdminRequest = async (requestId) => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\");\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/approve/${requestId}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Failed to approve request\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error approving request:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// REJECT ADMIN REQUEST\r\n// ========================\r\nexport const rejectAdminRequest = async (requestId) => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\");\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/reject/${requestId}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Failed to reject request\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error rejecting request:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// TOGGLE ADMIN ACTIVE STATUS\r\n// ========================\r\nexport const toggleAdminStatus = async (adminId, isActive) => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\");\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/toggle-status/${adminId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify({ isActive }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Failed to update admin status\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error toggling admin status:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// GET ADMIN ACTIVITY LOG\r\n// ========================\r\nexport const getAdminActivityLog = async (adminId) => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\");\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/activity/${adminId}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Failed to fetch activity log\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error fetching activity log:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// DELETE ADMIN\r\n// ========================\r\nexport const deleteAdmin = async (adminId) => {\r\n  try {\r\n    const token = localStorage.getItem(\"adminToken\");\r\n    \r\n    const response = await fetch(`${ADMIN_API_URL}/delete/${adminId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Failed to delete admin\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Error deleting admin:\", error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}